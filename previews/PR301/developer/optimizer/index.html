<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Custom optimizer types · StructuralEquationModels.jl</title><meta name="title" content="Custom optimizer types · StructuralEquationModels.jl"/><meta property="og:title" content="Custom optimizer types · StructuralEquationModels.jl"/><meta property="twitter:title" content="Custom optimizer types · StructuralEquationModels.jl"/><meta name="description" content="Documentation for StructuralEquationModels.jl."/><meta property="og:description" content="Documentation for StructuralEquationModels.jl."/><meta property="twitter:description" content="Documentation for StructuralEquationModels.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon_zeta.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="StructuralEquationModels.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">StructuralEquationModels.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">A fast and flexible SEM framework</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/first_model/">A first model</a></li><li><a class="tocitem" href="../../tutorials/concept/">Our Concept of a Structural Equation Model</a></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Model Specification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/specification/specification/">Model specification</a></li><li><a class="tocitem" href="../../tutorials/specification/graph_interface/">Graph interface</a></li><li><a class="tocitem" href="../../tutorials/specification/ram_matrices/">RAMMatrices interface</a></li><li><a class="tocitem" href="../../tutorials/specification/parameter_table/">ParameterTable interface</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Model Construction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/construction/construction/">Model Construction</a></li><li><a class="tocitem" href="../../tutorials/construction/outer_constructor/">Outer Constructor</a></li><li><a class="tocitem" href="../../tutorials/construction/build_by_parts/">Build by parts</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Optimization Backends</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/backends/optim/">Using Optim.jl</a></li><li><a class="tocitem" href="../../tutorials/backends/nlopt/">Using NLopt.jl</a></li></ul></li><li><a class="tocitem" href="../../tutorials/fitting/fitting/">Model Fitting</a></li><li><a class="tocitem" href="../../tutorials/inspection/inspection/">Model Inspection</a></li><li><a class="tocitem" href="../../tutorials/meanstructure/">Mean Structures</a></li><li><input class="collapse-toggle" id="menuitem-2-9" type="checkbox"/><label class="tocitem" for="menuitem-2-9"><span class="docs-label">Collections</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/collection/collection/">Collections</a></li><li><a class="tocitem" href="../../tutorials/collection/multigroup/">Multigroup models</a></li></ul></li><li><a class="tocitem" href="../../tutorials/constraints/constraints/">Constraints</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">Developer documentation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../extending/">Extending the package</a></li><li><a class="tocitem" href="../loss/">Custom loss functions</a></li><li><a class="tocitem" href="../implied/">Custom implied types</a></li><li class="is-active"><a class="tocitem" href>Custom optimizer types</a></li><li><a class="tocitem" href="../observed/">Custom observed types</a></li><li><a class="tocitem" href="../sem/">Custom model types</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Advanced tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/regularization/regularization/">Regularization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Performance tips</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../performance/sorting/">Model sorting</a></li><li><a class="tocitem" href="../../performance/mkl/">MKL</a></li><li><a class="tocitem" href="../../performance/simulation/">Simulation studies</a></li><li><a class="tocitem" href="../../performance/symbolic/">Symbolic precomputation</a></li><li><a class="tocitem" href="../../performance/starting_values/">Starting values</a></li><li><a class="tocitem" href="../../performance/parametric/">Parametric Types</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Internals and design</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../internals/internals/">Internals and design</a></li><li><a class="tocitem" href="../../internals/files/">files</a></li><li><a class="tocitem" href="../../internals/types/">types</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Developer documentation</a></li><li class="is-active"><a href>Custom optimizer types</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Custom optimizer types</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/StructuralEquationModels/StructuralEquationModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/StructuralEquationModels/StructuralEquationModels.jl/blob/main/docs/src/developer/optimizer.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Custom-optimizer-types"><a class="docs-heading-anchor" href="#Custom-optimizer-types">Custom optimizer types</a><a id="Custom-optimizer-types-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-optimizer-types" title="Permalink"></a></h1><p>The optimizer part of a model connects it to the optimization backend. Let&#39;s say we want to implement a new optimizer as <code>SemOptimizerMyopt</code>. The first part of the implementation is very similar to loss functions, so we just show the implementation of <code>SemOptimizerOptim</code> here as a reference:</p><pre><code class="language-julia hljs">############################################################################################
### Types and Constructor
############################################################################################
struct SemOptimizerMyopt{A, B} &lt;: SemOptimizer{:Myopt}
    algorithm::A
    options::B
end

SemOptimizer(Val{:Myopt}, args...; kwargs...) = SemOptimizerMyopt(args...; kwargs...)

SemOptimizer_impltype(::Val{:Myopt}) = SemOptimizerMyopt

SemOptimizerMyopt(;
    algorithm = LBFGS(),
    options = Optim.Options(; f_reltol = 1e-10, x_abstol = 1.5e-8),
    kwargs...,
) = SemOptimizerMyopt(algorithm, options)

struct MyOptResult{O &lt;: SemOptimizerMyopt} &lt;: SEM.SemOptimizerResult{O}
    optimizer::O
    ...
end

############################################################################################
### Recommended methods
############################################################################################

update_observed(optimizer::SemOptimizerMyopt, observed::SemObserved; kwargs...) = optimizer

############################################################################################
### additional methods
############################################################################################

options(optimizer::SemOptimizerMyopt) = optimizer.options</code></pre><p>Note that your optimizer is a subtype of <code>SemOptimizer{:Myopt}</code>, where you can choose a <code>:Myopt</code> that can later be used as a keyword argument to <code>fit(engine = :Myopt)</code>. Similarly, <code>SemOptimizer{:Myopt}(args...; kwargs...) = SemOptimizerMyopt(args...; kwargs...)</code> should be defined as well as a constructor that uses only keyword arguments:</p><pre><code class="language-julia hljs">SemOptimizerMyopt(;
    algorithm = LBFGS(),
    options = Optim.Options(; f_reltol = 1e-10, x_abstol = 1.5e-8),
    kwargs...,
) = SemOptimizerMyopt(algorithm, options)</code></pre><p>A method for <code>update_observed</code> and additional methods might be usefull, but are not necessary.</p><p>Now comes the substantive part: We need to provide a method for <code>fit</code>:</p><pre><code class="language-julia hljs">function fit(
    optim::SemOptimizerMyopt,
    model::AbstractSem,
    start_params::AbstractVector;
    kwargs...,
)
    ...

    optimization_result = MyoptResult(optim, ...)

    return SemFit(minimum, minimizer, start_params, model, optimization_result)
end</code></pre><p>The method has to return a <code>SemFit</code> object that consists of the minimum of the objective at the solution, the minimizer (aka parameter estimates), the starting values, the model and the optimization result (which may be anything you desire for your specific backend).</p><p>In addition, you might want to provide methods to access properties of your optimization result:</p><pre><code class="language-julia hljs">algorithm_name(res::MyOptResult) = ...
n_iterations(res::MyOptResult) = ...
convergence(res::MyOptResult) = ...</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../implied/">« Custom implied types</a><a class="docs-footer-nextpage" href="../observed/">Custom observed types »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Wednesday 4 February 2026 17:05">Wednesday 4 February 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
