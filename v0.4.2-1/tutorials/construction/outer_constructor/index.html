<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Outer Constructor · StructuralEquationModels.jl</title><meta name="title" content="Outer Constructor · StructuralEquationModels.jl"/><meta property="og:title" content="Outer Constructor · StructuralEquationModels.jl"/><meta property="twitter:title" content="Outer Constructor · StructuralEquationModels.jl"/><meta name="description" content="Documentation for StructuralEquationModels.jl."/><meta property="og:description" content="Documentation for StructuralEquationModels.jl."/><meta property="twitter:description" content="Documentation for StructuralEquationModels.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon_zeta.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="StructuralEquationModels.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">StructuralEquationModels.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">A fast and flexible SEM framework</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../first_model/">A first model</a></li><li><a class="tocitem" href="../../concept/">Our Concept of a Structural Equation Model</a></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Model Specification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../specification/specification/">Model specification</a></li><li><a class="tocitem" href="../../specification/graph_interface/">Graph interface</a></li><li><a class="tocitem" href="../../specification/ram_matrices/">RAMMatrices interface</a></li><li><a class="tocitem" href="../../specification/parameter_table/">ParameterTable interface</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox" checked/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Model Construction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../construction/">Model Construction</a></li><li class="is-active"><a class="tocitem" href>Outer Constructor</a><ul class="internal"><li><a class="tocitem" href="#Optimize-loss-functions-without-analytic-gradient"><span>Optimize loss functions without analytic gradient</span></a></li></ul></li><li><a class="tocitem" href="../build_by_parts/">Build by parts</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Optimization Backends</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../backends/optim/">Using Optim.jl</a></li><li><a class="tocitem" href="../../backends/nlopt/">Using NLopt.jl</a></li></ul></li><li><a class="tocitem" href="../../fitting/fitting/">Model Fitting</a></li><li><a class="tocitem" href="../../inspection/inspection/">Model Inspection</a></li><li><a class="tocitem" href="../../meanstructure/">Mean Structures</a></li><li><input class="collapse-toggle" id="menuitem-2-9" type="checkbox"/><label class="tocitem" for="menuitem-2-9"><span class="docs-label">Collections</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../collection/collection/">Collections</a></li><li><a class="tocitem" href="../../collection/multigroup/">Multigroup models</a></li></ul></li><li><a class="tocitem" href="../../constraints/constraints/">Constraints</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Developer documentation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../developer/extending/">Extending the package</a></li><li><a class="tocitem" href="../../../developer/loss/">Custom loss functions</a></li><li><a class="tocitem" href="../../../developer/implied/">Custom implied types</a></li><li><a class="tocitem" href="../../../developer/optimizer/">Custom optimizer types</a></li><li><a class="tocitem" href="../../../developer/observed/">Custom observed types</a></li><li><a class="tocitem" href="../../../developer/sem/">Custom model types</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Advanced tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../regularization/regularization/">Regularization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Performance tips</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../performance/sorting/">Model sorting</a></li><li><a class="tocitem" href="../../../performance/mkl/">MKL</a></li><li><a class="tocitem" href="../../../performance/simulation/">Simulation studies</a></li><li><a class="tocitem" href="../../../performance/symbolic/">Symbolic precomputation</a></li><li><a class="tocitem" href="../../../performance/starting_values/">Starting values</a></li><li><a class="tocitem" href="../../../performance/parametric/">Parametric Types</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Internals and design</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../internals/internals/">Internals and design</a></li><li><a class="tocitem" href="../../../internals/files/">files</a></li><li><a class="tocitem" href="../../../internals/types/">types</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li><a class="is-disabled">Model Construction</a></li><li class="is-active"><a href>Outer Constructor</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Outer Constructor</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/StructuralEquationModels/StructuralEquationModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/StructuralEquationModels/StructuralEquationModels.jl/blob/main/docs/src/tutorials/construction/outer_constructor.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Outer-Constructor"><a class="docs-heading-anchor" href="#Outer-Constructor">Outer Constructor</a><a id="Outer-Constructor-1"></a><a class="docs-heading-anchor-permalink" href="#Outer-Constructor" title="Permalink"></a></h1><p>We already have seen the outer constructor in action in <a href="../../first_model/#A-first-model">A first model</a>:</p><pre><code class="language-julia hljs">model = Sem(
    specification = partable,
    data = data
)

# output

Structural Equation Model
- Loss Functions
   SemML
- Fields
   observed:  SemObservedData
   implied:   RAM</code></pre><p>The output of this call tells you exactly what model you just constructed (i.e. what the loss functions, observed, implied and optimizer parts are).</p><p>As you can see, by default, we use maximum likelihood estimation abd the RAM implied type. To choose something different, you can provide it as a keyword argument:</p><pre><code class="language-julia hljs">model = Sem(
    specification = partable,
    data = data,
    observed = ...,
    implied = ...,
    loss = ...,
)</code></pre><p>For example, to construct a model for weighted least squares estimation that uses symbolic precomputation, write</p><pre><code class="language-julia hljs">model = Sem(
    specification = partable,
    data = data,
    implied = RAMSymbolic,
    loss = SemWLS,
    optimizer = SemOptimizerOptim
)</code></pre><p>In the section on <a href="../../concept/#Our-Concept-of-a-Structural-Equation-Model">Our Concept of a Structural Equation Model</a>, we go over the different options you have for each part of the model, and in <a href="../../concept/#API-model-parts">API - model parts</a> we explain each option in detail. Let&#39;s make another example: to use full information maximum likelihood information (FIML), we use</p><pre><code class="language-julia hljs">model = Sem(
    specification = partable,
    data = data,
    loss = SemFIML,
    observed = SemObservedMissing,
    meanstructure = true
)</code></pre><p>You may also provide addition arguments for specific parts of the model. For example, WLS estimation uses per default</p><p class="math-container">\[W = \frac{1}{2} D^T(S^{-1}\otimes S^{-1})D\]</p><p>as the weight matrix, where D is the so-called duplication matrix and S is the observed covariance matrix. However, you can pass any other weight matrix you want (e.g., UWL, DWLS, ADF estimation) as a keyword argument:</p><pre><code class="language-julia hljs">W = ...

model = Sem(
    specification = partable,
    data = data,
    implied = RAMSymbolic,
    loss = SemWLS,
    wls_weight_matrix = W
)
</code></pre><p>To see what additional keyword arguments are supported, you can consult the documentation of the specific part of the model (either in the REPL by typing <code>?</code> to enter the help mode and then typing the name of the thing you want to know something about, or in the online section <a href="../../concept/#API-model-parts">API - model parts</a>):</p><pre><code class="language-julia hljs">julia&gt;?

help&gt;SemObservedMissing

# output

  For observed data with missing values.

  Constructor
  ≡≡≡≡≡≡≡≡≡≡≡

  SemObservedMissing(;
      data,
      observed_vars = nothing,
      specification = nothing,
      kwargs...)

  Arguments
  ≡≡≡≡≡≡≡≡≡

    •  specification: optional SEM model specification
       (SemSpecification)

    •  data: observed data

    •  observed_vars::Vector{Symbol}: column names of the data (if
       the object passed as data does not have column names, i.e. is
       not a data frame)

  ────────────────────────────────────────────────────────────────────────

Extended help is available with `??SemObservedMissing`</code></pre><h2 id="Optimize-loss-functions-without-analytic-gradient"><a class="docs-heading-anchor" href="#Optimize-loss-functions-without-analytic-gradient">Optimize loss functions without analytic gradient</a><a id="Optimize-loss-functions-without-analytic-gradient-1"></a><a class="docs-heading-anchor-permalink" href="#Optimize-loss-functions-without-analytic-gradient" title="Permalink"></a></h2><p>For loss functions without analytic gradients, it is possible to use finite difference approximation or automatic differentiation. All loss functions provided in the package do have analytic gradients (and some even hessians or approximations thereof), so there is no need do use this feature if you are only working with them. However, if you implement your own loss function, you do not have to provide analytic gradients.</p><p>To use finite difference approximation, you may construct your model just as before, but swap the <code>Sem</code> constructor for <code>SemFiniteDiff</code>. For example</p><pre><code class="language-julia hljs">model = SemFiniteDiff(
    specification = partable,
    data = data
)</code></pre><p>constructs a model that will use finite difference approximation if you estimate the parameters via <code>fit(model)</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../construction/">« Model Construction</a><a class="docs-footer-nextpage" href="../build_by_parts/">Build by parts »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Wednesday 16 April 2025 15:08">Wednesday 16 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
